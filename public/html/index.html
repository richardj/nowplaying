<!DOCTYPE html>
<html ng-app="nowplaying">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="MobileOptimized" content="width" />
  <meta name="HandheldFriendly" content="true" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <title>What is playing right now?</title>

  <!-- bower:js -->
    <script src="vendor/angular.min.js" type="application/javascript"></script>
    <script src="vendor/color-thief.min.js" type="application/javascript"></script>
  <!-- endbower -->

  <script src="js/nowplaying.js" type="application/javascript"></script>
  <link rel="stylesheet" href="/css/style.css" type="text/css" />
</head>

<body>
  <div class="animate" id="trans"></div>
  
  <div class="content" ng-controller="mainController as mainCtrl">
    <!--
    <div class="loading animate" ng-show="loading">
      <i class="btm bt-spinner-clock bt-spin"></i>
    </div>
    -->
    <form>
      <h1>Hello,</h1>
      <input type="text" placeholder="My username is" ng-model="username" ng-minlength="1" />
      <button type="submit" class="btn" ng-click="mainCtrl.getUsers(username)">get &#x266B;</button>
    </form>


    <!--
    <div class="now animate-show">
     <h2>{{ track['@attr'].nowplaying ? 'is listening to' : 'last listened to' }} </h2>
     <h3 class="artist" ng-switch>{{ track.artist['#text'] || "Artist" }}</h3>
     <div class="holder">
        <div class="info">
          <h3 class="trackname" defaulValue>{{ track.name || "Track name" }}</h3><br />
          <h3 class="album">{{track.album['#text'] || "Album" }}</h3>
        </div>

        <div class="image">
          <div class="artwork">
            <div class="cover default">&#x266B;</div>
            <img ng-src="{{ track.image[3]['#text'] }}" class="cover" ng-show="track.image[3]['#text']"/>
            <div class="vinyl rotating"></div>
          </div> 
        </div>
      </div>
    </div>
    -->
      <!--
    <div class="social">
      <h2>Share directly on social media</h2>
      <a href="#" title="post to twitter" class="btn">Twitter</a>
      <a href="#" title="post to facebook" class="btn">Facebook</a>
    </div>
-->
    
    <div class="spotify" ng-show="users">
      <button class="btn" ng-click="mainCtrl.createPlaylist(users)">Create Spotify Playlist</button>
    </div>

    <span class="loading" ng-show="loading"></span>

    <ul>
      <li ng-repeat="user in users">
        <a href="{{ user.recenttrack.artist.url }}" title="Artist page on last.fm">{{ user.recenttrack.artist.name }}</a> - <a href="{{ user.recenttrack.url }}" title="Track page on last.fm">{{ user.recenttrack.name }}</a>
        <span><a href="" ng-click="mainCtrl.getUsers(user.name)">{{ user.name }}</a></span>
        <!--<span><a ng-href="?user={{ user.name }}" ng-click="mainCtrl.getUsers(user.name)">{{ user.name }}</a></span>-->
      </p>
    </ul>
    <hr />
    <div  class="users">
      <div class="user" ng-show="!loading" ng-repeat="user in users">
        <h3><a href="" ng-click="mainCtrl.getUsers(user.name)"><!--<img ng-src="{{ user.image[0]['#text'] }}" alt="avatar from {{ user.name }}" class="avatar" />-->{{ user.name }}</a></h3>
        <h4>
          <a href="{{ user.recenttrack.artist.url }}" title="Artist page on last.fm">{{ user.recenttrack.artist.name }}</a> - <a href="{{ user.recenttrack.url }}" title="Track page on last.fm">{{ user.recenttrack.name }}</a>
        </h4>

        <p ng-show="user.recenttrack.album.name">from the album: <a href="{{ user.recenttrack.album.url }}" title="">{{ user.recenttrack.album.name }}</a></p>
        <!--<p>go to <a ng-href="{{ user.url }}">User profile</a></p> -->
      </div>
    </div>
  </div>
  </div>
</body>
</html>
